<!-- templates/main/checkout.html -->

{% extends 'main/layout/base.html' %}
{% load static %}

{% block title %}Secure Checkout{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'styles/checkout.css' %}">

<section class="checkout-section">
  <div class="container-xl">
    <h2 class="checkout-heading">Secure Checkout</h2>
    <hr class="checkout-divider">

    <div class="checkout-grid">
      <!-- LEFT SECTION -->
      <form method="POST" class="checkout-form">
        {% csrf_token %}

        <!-- CONTACT DETAILS -->
        <div class="checkout-card">
          <h3>Contact Details</h3>
          <div class="form-row">
            <div class="form-group">
              <label>First Name</label>
              <input type="text" name="first_name" required>
            </div>
            <div class="form-group">
              <label>Last Name</label>
              <input type="text" name="last_name">
            </div>
          </div>

          <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" required>
          </div>

          <div class="form-row">
            <div class="form-group small">
              <label>Phone Code</label>
              <select name="phone_code">
                <option value="+91">+91</option>
                <option value="+1">+1</option>
                <option value="+44">+44</option>
              </select>
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input type="text" name="phone_number" required>
            </div>
          </div>
        </div>

        <!-- SHIPPING DETAILS -->
        <div class="checkout-card">
          <h3>Shipping Details</h3>
          <div class="form-group">
            <label>Flat/House no.</label>
            <input type="text" name="flat_no" required>
          </div>

          <div class="form-group">
            <label>Address</label>
            <input type="text" name="address" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>City</label>
              <input type="text" name="city" required>
            </div>
            <div class="form-group">
              <label>State</label>
              <input type="text" name="state" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Postal Code</label>
              <input type="text" name="postal_code" required>
            </div>
            <div class="form-group">
              <label>Famous Landmark</label>
              <input type="text" name="landmark">
            </div>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" name="same_address">
            <label>My shipping and Billing address are the same</label>
          </div>
        </div>

        <button type="submit" formaction="{% url 'main:payment' %}" class="continue-btn">Continue</button>

      </form>

      <!-- RIGHT SECTION -->
      <div class="summary-card">
        <h3>Order Summary <span>{{ cart_items.count }} Items</span></h3>
        <div class="order-items">
          {% for item in cart_items %}
          <div class="order-item">
            <p>{{ item.template.name }}</p>
            <span>${{ item.template.price|floatformat:2 }}</span>
          </div>
          {% endfor %}
        </div>

        <div class="order-totals">
          <p class="discount">Total discount <span>${{ discount|floatformat:2 }}</span></p>
          <p class="fee">Handling Fee <span>$0.00</span></p>
          <h4>Total <span>US$ {{ grand_total|floatformat:2 }}</span></h4>
        </div>

        <div class="secure-checkout">
          <i class="bi bi-lock"></i> Secure Checkout
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
